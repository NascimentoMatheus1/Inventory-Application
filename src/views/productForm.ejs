<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head')%>

    <body>

        <%- include('./partials/navBar')%>

            <main class="container">
                <div class="form-wrapper">
                    <h1>
                        <%= product ? 'Update the product' : 'Add a product' %>
                    </h1>
                    <p class="form-subtitle">
                        <%= product ? 'submit the new info below.' : 'submit a new product in our inventory.' %>
                    </p>
                    <%- include("partials/formValidationList.ejs") %>
                        <form action="<%= product ? `/products/edit/${product.id}` : '/products/save' %>" method="POST"
                            class="admin-form">

                            <div class="form-group">
                                <label for="category_id">Category:</label>
                                <select name="category_id" id="category_id" required>
                                    <% categories.map((item)=> { %>

                                        <option value="<%= item.id %>" <%=(product && product.category_id===item.id)
                                            ? 'selected' : '' %>>
                                            <%= item.name %>
                                        </option>
                                        <% }) %>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="name">Name:</label>
                                <input type="text" id="name" name="name" placeholder="e.g., Phone"
                                    value="<%= product ? product.name : '' %>" required>
                            </div>

                            <div class="form-group">
                                <label for="sale_price">Sale price:</label>
                                <input type="number" id="sale_price" name="sale_price"
                                    value="<%= product ? product.sale_price : '' %>" required>
                            </div>

                            <div class="form-group">
                                <label for="name">Current Stock:</label>
                                <input type="number" id="current_stock" name="current_stock"
                                    value="<%= product ? product.current_stock : '' %>" required>
                            </div>

                            <div class="form-group">
                                <label for="description">Description:</label>
                                <textarea id="description" name="description" rows="3"
                                    placeholder="Briefly describe this..."
                                    required><%= product ? product.description : '' %></textarea>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn-save">Save</button>
                                <a href="/products" class="btn-cancel">Cancel</a>
                            </div>
                        </form>
                </div>
            </main>

    </body>

</html>